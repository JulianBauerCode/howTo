!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TrackLib=t():e.TrackLib=t()}(this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=68)}([function(e,t,r){"use strict";t.__esModule=!0;var n=function(e,t){var r;if(a.isObject(e)&&a.isObject(t))for(r in t)!a.isObject(t[r])||a.isFunction(t[r])||a.isArray(t[r])?e[r]=t[r]:(e.hasOwnProperty(r)||(e[r]={}),n(e[r],t[r]));return e},i=function(e,t){var r,n,i,a,o,u={host:"",hash:"",parameter:{},parameterValue:""};if(i=[],r=e.split("?"),u.host=r[0],o=r[1]){r=o.split("#"),r.length>1&&(u.hash=r[1]),r=r[0].split("&");for(var s=0;s<r.length;s++)n=r[s].split("="),a=n[0],t[a]&&"undefined"!==n[1]&&(u.parameter[a]=n[1],i.push([n[0],n[1]].join("=")));u.parameterValue=i.join("&")}return u},a={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isScalar:function(e){return a.isString(e)||a.isNumber(e)||a.isBoolean(e)},isObject:function(e){return Object(e)===e},isFunction:function(e){return"function"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isUndefined:function(e){return void 0===e},ensureArray:function(e,t){return void 0===t&&(t=","),"string"==typeof e&&(e=e.split(t)),e},prefixObject:function(e,t){var r,n={};for(r in e)n[t+r]=e[r];return n},createUrl:function(e){var t,r=[];if(t=e.baseUrl,e.query){for(var n in e.query)r.push(n+"="+encodeURIComponent(e.query[n]));t+="?"+r.join("&")}return t},sanitizeUrl:function(e,t){var r,n=i(e,t);return r=n.host,n.parameterValue.length&&(r+="?"+n.parameterValue),n.hash.length&&(r+="#"+n.hash),r},mergeDeep:n};t.util=a},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function TrackingLogger(){this.observers=[]}return TrackingLogger.prototype.registerObserver=function(e){this.observers.push(e)},TrackingLogger.prototype.removeObserver=function(e){this.observers.splice(this.observers.indexOf(e),1)},TrackingLogger.prototype.notifyObservers=function(e){var t;for(t=0;t<this.observers.length;t++)this.observers[t].update(e)},TrackingLogger.prototype.log=function(e,t,r){this.notifyObservers({component:e,action:t,data:r})},TrackingLogger}();t.TrackingLogger=n;var i=new n;t.logger=i,i.registerObserver({update:function(e){}})},function(e,t){var r=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){(function(t,n){!function(t,r){e.exports=r()}(0,function(){"use strict";function objectOrFunction(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function isFunction(e){return"function"==typeof e}function setScheduler(e){u=e}function setAsap(e){s=e}function useVertxTimer(){return void 0!==o?function(){o(flush)}:useSetTimeout()}function useSetTimeout(){var e=setTimeout;return function(){return e(flush,1)}}function flush(){for(var e=0;e<a;e+=2){(0,y[e])(y[e+1]),y[e]=undefined,y[e+1]=undefined}a=0}function then(e,t){var r=arguments,n=this,i=new this.constructor(noop);i[d]===undefined&&makePromise(i);var a=n._state;return a?function(){var e=r[a-1];s(function(){return invokeCallback(a,i,e,n._result)})}():subscribe(n,i,e,t),i}function resolve$1(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(noop);return resolve(r,e),r}function noop(){}function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(e){try{return e.then}catch(t){return b.error=t,b}}function tryThen(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function handleForeignThenable(e,t,r){s(function(e){var n=!1,i=tryThen(r,t,function(r){n||(n=!0,t!==r?resolve(e,r):fulfill(e,r))},function(t){n||(n=!0,reject(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,reject(e,i))},e)}function handleOwnThenable(e,t){t._state===v?fulfill(e,t._result):t._state===k?reject(e,t._result):subscribe(t,undefined,function(t){return resolve(e,t)},function(t){return reject(e,t)})}function handleMaybeThenable(e,t,r){t.constructor===e.constructor&&r===then&&t.constructor.resolve===resolve$1?handleOwnThenable(e,t):r===b?(reject(e,b.error),b.error=null):r===undefined?fulfill(e,t):isFunction(r)?handleForeignThenable(e,t,r):fulfill(e,t)}function resolve(e,t){e===t?reject(e,selfFulfillment()):objectOrFunction(t)?handleMaybeThenable(e,t,getThen(t)):fulfill(e,t)}function publishRejection(e){e._onerror&&e._onerror(e._result),publish(e)}function fulfill(e,t){e._state===m&&(e._result=t,e._state=v,0!==e._subscribers.length&&s(publish,e))}function reject(e,t){e._state===m&&(e._state=k,e._result=t,s(publishRejection,e))}function subscribe(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+v]=r,i[a+k]=n,0===a&&e._state&&s(publish,e)}function publish(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=undefined,i=undefined,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?invokeCallback(r,n,i,a):i(a);e._subscribers.length=0}}function ErrorObject(){this.error=null}function tryCatch(e,t){try{return e(t)}catch(r){return _.error=r,_}}function invokeCallback(e,t,r,n){var i=isFunction(r),a=undefined,o=undefined,u=undefined,s=undefined;if(i){if(a=tryCatch(r,n),a===_?(s=!0,o=a.error,a.error=null):u=!0,t===a)return void reject(t,cannotReturnOwn())}else a=n,u=!0;t._state!==m||(i&&u?resolve(t,a):s?reject(t,o):e===v?fulfill(t,a):e===k&&reject(t,a))}function initializePromise(e,t){try{t(function(t){resolve(e,t)},function(t){reject(e,t)})}catch(r){reject(e,r)}}function nextId(){return T++}function makePromise(e){e[d]=T++,e._state=undefined,e._result=undefined,e._subscribers=[]}function Enumerator$1(e,t){this._instanceConstructor=e,this.promise=new e(noop),this.promise[d]||makePromise(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,validationError())}function validationError(){return new Error("Array Methods must be provided an Array")}function all$1(e){return new Enumerator$1(this,e).promise}function race$1(e){var t=this;return new t(i(e)?function(r,n){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function reject$1(e){var t=this,r=new t(noop);return reject(r,e),r}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise$2(e){this[d]=nextId(),this._result=this._state=undefined,this._subscribers=[],noop!==e&&("function"!=typeof e&&needsResolver(),this instanceof Promise$2?initializePromise(this,e):needsNew())}function polyfill$1(){var e=undefined;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(i){}if("[object Promise]"===r&&!t.cast)return}e.Promise=Promise$2}var e=undefined;e=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var i=e,a=0,o=undefined,u=undefined,s=function(e,t){y[a]=e,y[a+1]=t,2===(a+=2)&&(u?u(flush):g())},c="undefined"!=typeof window?window:undefined,f=c||{},l=f.MutationObserver||f.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,y=new Array(1e3),g=undefined;g=p?function(){return function(){return t.nextTick(flush)}}():l?function(){var e=0,t=new l(flush),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():h?function(){var e=new MessageChannel;return e.port1.onmessage=flush,function(){return e.port2.postMessage(0)}}():c===undefined?function(){try{var e=r(35);return o=e.runOnLoop||e.runOnContext,useVertxTimer()}catch(t){return useSetTimeout()}}():useSetTimeout();var d=Math.random().toString(36).substring(16),m=void 0,v=1,k=2,b=new ErrorObject,_=new ErrorObject,T=0;return Enumerator$1.prototype._enumerate=function(e){for(var t=0;this._state===m&&t<e.length;t++)this._eachEntry(e[t],t)},Enumerator$1.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===resolve$1){var i=getThen(e);if(i===then&&e._state!==m)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===Promise$2){var a=new r(noop);handleMaybeThenable(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},Enumerator$1.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===m&&(this._remaining--,e===k?reject(n,r):this._result[t]=r),0===this._remaining&&fulfill(n,this._result)},Enumerator$1.prototype._willSettleAt=function(e,t){var r=this;subscribe(e,undefined,function(e){return r._settledAt(v,t,e)},function(e){return r._settledAt(k,t,e)})},Promise$2.all=all$1,Promise$2.race=race$1,Promise$2.resolve=resolve$1,Promise$2.reject=reject$1,Promise$2._setScheduler=setScheduler,Promise$2._setAsap=setAsap,Promise$2._asap=s,Promise$2.prototype={constructor:Promise$2,then:then,"catch":function(e){return this.then(null,e)}},Promise$2.polyfill=polyfill$1,Promise$2.Promise=Promise$2,Promise$2})}).call(t,r(33),r(34))},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";t.__esModule=!0;var n=r(21),i=r(0),a=function(){function TrackingData(){this.trackData=new n.MultiLayer,this.proptertiesCache={},this.filter={}}return TrackingData.prototype.getData=function(){return this.trackData},TrackingData.prototype.addFilter=function(e,t){this.filter[e]=t},TrackingData.prototype.runFilter=function(e,t,r){var n;for(n in this.filter)this.filter[n](e,t,r)},TrackingData.prototype.preset=function(e){var t;for(t in e)this.trackData.hasLayer(t)&&(TrackingData.unifyParameter(e[t]),this.trackData.setLayer(TrackingData.getPresetKey(t),e[t]))},TrackingData.prototype.getProperties=function(e){return this.proptertiesCache[e]||(this.proptertiesCache[e]={system:this.trackData.merge([e,TrackingData.getPresetKey(e)],["properties","system"]),lib:this.trackData.merge(["lib",e,TrackingData.getPresetKey("lib"),TrackingData.getPresetKey(e)],["properties","lib"])}),this.proptertiesCache[e]},TrackingData.prototype.setCache=function(e,t,r){var n,i=["lib",e,TrackingData.getPresetKey("lib"),TrackingData.getPresetKey(e)];(n=this.trackData.findLayer(i,["parameter",t,"cache"],!0))&&this.trackData.setValue(n,["parameter",t],"cache_value",r)},TrackingData.prototype.getAllParameter=function(e,t){void 0===t&&(t={});var r;return r=["lib",e.key,TrackingData.getPresetKey("lib"),TrackingData.getPresetKey(e.key),t],this.trackData.merge(r,"parameter")},TrackingData.unifyParameter=function(e){var t,r;r=e.hasOwnProperty("parameter")?e.parameter:e;for(t in r)i.util.isObject(r[t])||(r[t]={set:r[t]})},TrackingData.getPresetKey=function(e){return e+TrackingData.PRESET_AFFIX},TrackingData.PRESET_AFFIX="_preset",TrackingData}();t.TrackingData=a},function(e,t,r){var n=r(4),i=r(2),a=r(10),o=r(47),u=r(48),s=function(e,t,r){var c,f,l,p,h=e&s.F,y=e&s.G,g=e&s.S,d=e&s.P,m=e&s.B,v=y?n:g?n[t]||(n[t]={}):(n[t]||{}).prototype,k=y?i:i[t]||(i[t]={}),b=k.prototype||(k.prototype={});y&&(r=t);for(c in r)f=!h&&v&&v[c]!==undefined,l=(f?v:r)[c],p=m&&f?u(l,n):d&&"function"==typeof l?u(Function.call,l):l,v&&o(v,c,l,e&s.U),k[c]!=l&&a(k,c,p),d&&b[c]!=l&&(b[c]=l)};n.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(41),i=r(46);e.exports=r(7)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(51),i=r(58);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(15),i=r(16);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(52);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(16);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(20),i=r(8),a=r(22),o=r(23),u=r(24),s=r(1),c=r(26),f=r(28),l=r(30),p=r(31),h=r(32),y=r(36),g=r(37),d=function(){function TrackLib(e,t){void 0===t&&(t={}),this.trackOptions=new n.TrackOptions(t),this.trackData=new i.TrackingData,this.trackSystems=new a.TrackingSystems(this.trackData),this.trackGenerator=new o.TrackingGenerator(this.trackData),this.addTrackingSystem(c.libSystem),this.addTrackingSystem(f.brainTrackingSystem),this.addTrackingSystem(l.pakpieTrackingSystem),this.addTrackingSystem(p.tifTrackingSystem),this.addTrackingGenerator(h.imageGenerator),this.addTrackingGenerator(y.imagePakpieGenerator),this.addTrackingGenerator(g.objectGenerator),this.preset(e),this.tracker=new u.Tracker(this.trackData,this.trackSystems,this.trackGenerator,this.trackOptions)}return TrackLib.prototype.preset=function(e){return this.trackData.preset(e),this},TrackLib.prototype.addFilter=function(e,t){this.trackData.addFilter(e,t)},TrackLib.prototype.addTrackingSystem=function(e){return this.trackSystems.add(e),this},TrackLib.prototype.getTrackingSystem=function(e){return this.trackSystems.get(e)},TrackLib.prototype.getTrackingData=function(e){var t={},r=this.getTrackingSystem(e);return r&&(t=this.tracker.getTrackParameter(r)),t},TrackLib.prototype.addTrackingGenerator=function(e){return this.trackGenerator.add(e),this},TrackLib.prototype.track=function(e,t){return void 0===t&&(t={}),this.tracker.run(e,t),this},TrackLib.prototype.getLogger=function(){return s.logger},TrackLib}();t.TrackLib=d},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(1),a={buffer:{read:!1,write:!1,retry:3,key:"trlbuf",container:"html5"}},o=function(){function TrackOptions(e){this.options=n.util.mergeDeep(a,e),e.observer&&n.util.isObject(e.observer)&&n.util.isFunction(e.observer.update)&&i.logger.registerObserver(e.observer)}return TrackOptions.prototype.get=function(){return this.options},TrackOptions}();t.TrackOptions=o},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=function(){function MultiLayer(){this.layer={},this.tree={},this.setLayer=function(e,t){return!!this.addLayer(e)&&(this.layer[e]=Object.assign(this.layer[e],t),!0)},this.createLayer=function(){return{}}}return MultiLayer.prototype.walkTree=function(e,t){return t.length&&!n.util.isUndefined(e)?this.walkTree(e[t[0]],t.slice(1)):e},MultiLayer.prototype.copyTree=function(e,t,r){var n=r.shift();return r.length?!!t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]={}),this.copyTree(e[n],t[n],r)):(e[n]=t[n],!0)},MultiLayer.prototype.addLayer=function(e){return!this.layer.hasOwnProperty(e)&&(this.layer[e]=this.createLayer(),!0)},MultiLayer.prototype.hasLayer=function(e){return this.layer.hasOwnProperty(e)},MultiLayer.prototype.getLayer=function(e){return this.layer.hasOwnProperty(e)?this.layer[e]:null},MultiLayer.prototype.findLayer=function(e,t,r){for(var n,i,a=0,o=e;a<o.length;a++)if(n=o[a],this.getLayerValue(n,t)===r){i=this.layer[n];break}return i},MultiLayer.prototype.getValue=function(e,t,r){var i;return t=n.util.ensureArray(t,"."),i=this.walkTree(e,t),n.util.isUndefined(i)&&(i=r),i},MultiLayer.prototype.setValue=function(e,t,r,i){var a;t=n.util.ensureArray(t,"."),a=this.walkTree(e,t),a[r]=i},MultiLayer.prototype.getLayerValue=function(e,t,r){var n=r;return this.layer.hasOwnProperty(e)&&(n=this.getValue(this.layer[e],t,r)),n},MultiLayer.prototype.setLayerValue=function(e,t,r,n){this.layer.hasOwnProperty(e)&&this.setValue(this.layer[e],t,r,n)},MultiLayer.prototype.merge=function(e,t){var r,i={};for(e=n.util.ensureArray(e),r=0;r<e.length;r++)n.util.isObject(e[r])?i=n.util.mergeDeep(i,e[r][t]):this.layer.hasOwnProperty(e[r])&&(i=n.util.mergeDeep(i,this.getLayerValue(e[r],t)));return i},MultiLayer.prototype.getChildren=function(e){return this.tree.hasOwnProperty(e)?this.tree[e].children:{}},MultiLayer.prototype.linkLayer=function(e,t){var r=!1;return this.layer.hasOwnProperty(e)&&this.layer.hasOwnProperty(t)&&(this.tree.hasOwnProperty(e)||(this.tree[e]={parents:{},children:{}}),this.tree.hasOwnProperty(t)||(this.tree[t]={parents:{},children:{}}),this.tree[e].children[t]=this.layer[t],this.tree[t].parents[e]=this.layer[e],r=!0),r},MultiLayer}();t.MultiLayer=i},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function TrackingSystems(e){this.trackData=e}return TrackingSystems.prototype.add=function(e){this.trackData.getData().setLayer(e.key,e)&&"lib"!==e.key&&this.trackData.getData().linkLayer("lib",e.key)},TrackingSystems.prototype.get=function(e){return this.trackData.getData().getLayer(e)},TrackingSystems}();t.TrackingSystems=n},function(e,t,r){"use strict";t.__esModule=!0;var n=function(){function TrackingGenerator(e){this.trackData=e,this.trackData.getData().addLayer("_generator")}return TrackingGenerator.prototype.add=function(e){var t=TrackingGenerator.getGeneratorKey(e.key);this.trackData.getData().setLayer(t,e)&&this.trackData.getData().linkLayer("_generator",t)},TrackingGenerator.prototype.get=function(e){var t=TrackingGenerator.getGeneratorKey(e);return this.trackData.getData().getLayer(t)},TrackingGenerator.getGeneratorKey=function(e){return e+TrackingGenerator.GENERATOR_AFFIX},TrackingGenerator.GENERATOR_AFFIX="_generator",TrackingGenerator}();t.TrackingGenerator=n},function(e,t,r){"use strict";t.__esModule=!0;var n=r(8),i=r(0),a=r(25),o=function(){function Tracker(e,t,r,n){var i=this;this.trackData=e,this.trackSystems=t,this.trackGenerator=r,this.trackOptions=n,this.trackBuffer=new a.TrackBuffer(this.trackOptions.get().buffer),this.trackOptions.get().buffer.read&&this.trackBuffer.addListener(function(e,t){return i.bufferListener(e,t)})}return Tracker.prototype.setCallData=function(e,t){this.callData={},"string"==typeof e&&(e={section:e}),this.callData.parameter=e,this.callData.properties=t,n.TrackingData.unifyParameter(this.callData)},Tracker.prototype.bufferListener=function(e,t){switch(e){case a.BufferEvents.ready:this.writeFromBuffer()}},Tracker.prototype.writeFromBuffer=function(){var e,t,r=this;(e=this.trackBuffer.get())&&(t=this.trackGenerator.get(e.generator))&&t.track(e.value).then(function(){r.trackBuffer.complete(e)})["catch"](function(){r.trackBuffer.error(e)})},Tracker.prototype.run=function(e,t){var r,n,a,o,u,s;this.setCallData(e,t),r=this.getActiveTrackingSystems();for(n in r)if(a=r[n],o=this.getTrackParameter(a),u=this.trackData.getProperties(a.key),s=this.trackGenerator.get(u.lib.generator),u.lib.generatorAdapter&&i.util.isFunction(u.lib.generatorAdapter)&&(o=u.lib.generatorAdapter(u,o)),this.trackOptions.get().buffer.write&&s.getValue){var c=s.getValue(o);this.trackBuffer.add(c,s.key)}else s.run(o)},Tracker.prototype.getTrackParameter=function(e){var t,r,n,a,o,u,s={};for(t=this.trackData.getProperties(e.key),r=this.callData,n=i.util.mergeDeep({},this.callData),r.systemParameter=this.trackData.getData().merge(["lib",e.key],"parameter"),r.allParameter=this.trackData.getAllParameter(e,r),r.properties=this.trackData.getProperties(e.key),a=this.trackData.getData().getValue(t,["lib","useparameter"],[]),i.util.isFunction(a)&&(a=a(e,r)),o=0;o<a.length;o++)u=this.resolveParameter(e,a[o],r),i.util.isObject(u)&&(s=Object.assign(s,u));return this.trackData.runFilter(e,s,n),s},Tracker.prototype.resolveParameter=function(e,t,r,n){void 0===n&&(n={});var a,o,u,s={},c={};if(n=Object.assign({alias:!0},n),o=r.allParameter[t],o.cache&&o.hasOwnProperty("cache_value"))u=o.cache_value;else switch(o.need&&i.util.isObject(o.need)&&(c=this.resolveNeededValues(e,o.need,r)),!0){case o.hasOwnProperty("fixed"):u=o.fixed;break;case o.hasOwnProperty("calc")&&i.util.isFunction(o.calc):u=o.calc(c,o,e);break;case o.hasOwnProperty("set"):u=o.set}return i.util.isObject(u)?s=u:(a=n.alias&&o.alias?o.alias:t,i.util.isScalar(u)?s[a]=u:o.hasOwnProperty("defaultValue")&&i.util.isScalar(o.defaultValue)&&(s[a]=o.defaultValue)),!o.cache||o.hasOwnProperty("cache_value")||i.util.isUndefined(u)||this.trackData.setCache(e.key,t,u),s},Tracker.prototype.resolveNeededValues=function(e,t,r){var n,a,o,u,s={},c=!0;if(t.properties&&i.util.isArray(t.properties))for(n=this.trackData.getProperties(e.key),s.properties={},o=0;o<t.properties.length;o++)c=c&&this.trackData.getData().copyTree(s.properties,n,i.util.ensureArray(t.properties[o],"."));if(t.parameter&&i.util.isArray(t.parameter))for(s.parameter={},o=0;o<t.parameter.length;o++)a=this.resolveParameter(e,t.parameter[o],r,{alias:!1}),s.parameter=Object.assign(s.parameter,a);if(t.runtime&&i.util.isArray(t.runtime))for(s.runtime={},o=0;o<t.runtime.length;o++)u=t.runtime[o],s.runtime[u]=this.runtimeHelper(u,r);return c||(s=null),s},Tracker.prototype.getActiveTrackingSystems=function(){var e,t,r={},n=this.trackData.getData().getChildren("lib");for(e in n){if(t=!1,this.callData.properties[e]&&i.util.isBoolean(this.callData.properties[e].active))t=this.callData.properties[e].active;else{var a=this.trackData.getProperties(e);!0===this.trackData.getData().getValue(a,["lib","active"])&&(t=!0)}t&&(r[e]=n[e])}return r},Tracker.prototype.runtimeHelper=function(e,t){void 0===t&&(t={});var r;switch(e){case"activeSystems":r=this.getActiveTrackingSystems()}return r},Tracker}();t.Tracker=o},function(e,t,r){"use strict";function storageAvailable(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(n){return!1}}t.__esModule=!0;var n=r(0),i=r(1),a={ready:"ready"};t.BufferEvents=a;var o=function(){function TrackBuffer(e){this.options=e,this.storage=null,this.buffer=null,this.listener=[],this.active=storageAvailable("localStorage"),this.active&&(this.storage=localStorage),this.ensureBuffer()}return TrackBuffer.prototype.addListener=function(e){this.listener.push(e),this.checkReady()},TrackBuffer.prototype.add=function(e,t){var r;r={created:(new Date).getTime(),value:e,generator:t,meta:{tries:1}},this.buffer.push(r),this.saveBuffer()},TrackBuffer.prototype.retry=function(e){e.meta.tries++,this.buffer.push(e)},TrackBuffer.prototype.remove=function(e){var t=this.getIndex(e);n.util.isNumber(t)&&this.buffer.splice(t,1)},TrackBuffer.prototype.complete=function(e){this.remove(e),this.saveBuffer()},TrackBuffer.prototype.error=function(e){this.remove(e),e.meta.tries<this.options.retry&&this.retry(e),this.saveBuffer()},TrackBuffer.prototype.get=function(e){return void 0===e&&(e=0),this.ensureBuffer(),e<this.buffer.length?this.buffer[e]:null},TrackBuffer.prototype.isActive=function(){return this.active},TrackBuffer.prototype.emit=function(e,t){void 0===t&&(t={});var r;for(r=0;r<this.listener.length;r++)this.listener[r](e,t)},TrackBuffer.prototype.checkReady=function(){this.buffer.length>0&&this.emit(a.ready)},TrackBuffer.prototype.getIndex=function(e){var t,r=null;for(this.ensureBuffer(),t=0;t<this.buffer.length;t++)if(this.buffer[t].value=e.value){r=t;break}return r},TrackBuffer.prototype.ensureBuffer=function(){null===this.buffer&&(this.buffer=this.loadBuffer(),null===this.buffer&&(this.buffer=[]))},TrackBuffer.prototype.saveBuffer=function(){var e;return!!this.active&&(this.ensureBuffer(),e=JSON.stringify(this.buffer),this.storage.setItem(this.options.key,e),this.checkReady(),i.logger.log("storage","write",this.buffer),!0)},TrackBuffer.prototype.loadBuffer=function(){var e,t=null;if(this.storage){if(e=this.storage.getItem(this.options.key))try{e=JSON.parse(e)}catch(r){}t=n.util.isArray(e)?e:[]}return t},TrackBuffer}();t.TrackBuffer=o},function(e,t,r){"use strict";t.__esModule=!0;var n=r(27),i=r(0),a={mc:!0,ac:!0,domainName:!0,isCH:!0,is1Reg:!0,q:!0,cd:!0,ved:!0},o={key:"lib",parameter:{timestamp:{calc:function(){return(new Date).getTime()}},resolutionw:{cache:!0,calc:function(){return window.screen.width}},resolutionh:{cache:!0,calc:function(){return window.screen.height}},ppi:{cache:!0,calc:function(){var e=0;if(window.matchMedia){var t=function(e){return!0===matchMedia("(max-resolution: "+e+"dpi)").matches},r=0,n=96,i=t(r),a=t(n),o=n-r,u=void 0,s=0;if(i!==a)for(;o>1;){if(u=r+Math.floor(o/2),i!==t(u)?n=u:r=u,o=n-r,++s>12){e=-1;break}e=n}}return e}},software:{},softwareversion:{},softwarevariant:{},iid:{},brand:{defaultValue:"unknwon"},registrationcountry:{},hid:{},product:{},viewportw:{cache:!1,calc:function(){return window.innerWidth}},viewporth:{cache:!1,calc:function(){return window.innerHeight}},section:{},trackingtype:{},eventposition:{},contentposition:{},contentid:{},source:{},destination:{},pageurl:{cache:!0,calc:function(){var e=i.util.sanitizeUrl(document.location.href,a);return e=e.length?e:null}},referrer:{cache:!0,calc:function(){var e=i.util.sanitizeUrl(document.referrer,a);return e=e.length?e:null}},campaign:{calc:function(){return n.getLibCampaign()}},result:{},count:{},size:{},time:{},data:{}},properties:{lib:{useparameter:function(e,t){var r=Object.keys(t.systemParameter);return t.properties.lib.hasOwnProperty("addparameter")&&(r=r.concat(t.properties.lib.addparameter)),r},addparameter:[],generatorAdapter:function(e,t){var r,n,i=t.brand;return n=e.lib.hasOwnProperty("stage")?e.lib.stage:"live",r=e.system.base_url?e.system.base_url:e.lib.getBrainUrl(i,n),{baseUrl:r,query:t}},getBrainUrl:function(e,t){var r;switch(t){case"qa":r="https://wa-qa.ui-portal.de/t.gif";break;case"prelive":r="https://wa-pre.ui-portal.de/t.gif";break;default:switch(e){case"mailcom":case"gmxcom":r="https://us.wa.ui-portal.com/t.gif";break;default:r="https://wa.ui-portal.de/t.gif"}}return r}}}};t.libSystem=o},function(e,t,r){"use strict";function getQueryParameter(e){var t,r,i,a,o=document.location.search.slice(1);if(null===n&&(n={},o)){o=o.split("#")[0],t=o.split("&");for(var u=0;u<t.length;u++)r=t[u].split("="),i=r[0].toLowerCase(),a=r[1]?r[1]:null,i&&a&&(n[i]=a)}return n[e]?n[e]:null}function getLibCampaign(){for(var e,t,r=["hash","mc","kid"],n=[],i=0,o=r;i<o.length;i++)e=o[i],(t=a[e]?a[e]():null)&&n.push(t);switch(n.length){case 0:t=null;break;case 1:t="#"+n[0];break;default:t="#"+n.join("#")}return t}t.__esModule=!0;var n=null,i={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}},a={hash:function(){return document.location.hash?document.location.hash.slice(1):null},mc:function(){return getQueryParameter("mc")},kid:function(){var e=getQueryParameter("kid");return e||(e=i.getItem("cookieKID")),e=e?e.replace(/@/g,"_"):null}};t.getLibCampaign=getLibCampaign},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(29),a={key:"brain",mapping:{trackingtype:{cl:"click",ev:"event"}},parameter:{name:{need:{properties:["system.section_prefix"],parameter:["trackingtype","section"]},calc:function(e){return[e.properties.system.section_prefix,e.parameter.trackingtype,e.parameter.section].join(".")}},brand:{},timestamp:{alias:"mts"},registrationcountry:{alias:"country"},trackingtype:{alias:"type",calc:function(e,t,r){var n;return t.set&&(n=r.mapping.trackingtype.hasOwnProperty(t.set)?r.mapping.trackingtype[t.set]:t.set),n}},tif:{need:{runtime:["activeSystems"]},calc:function(e){return e.runtime.activeSystems.hasOwnProperty("tif")?1:0}},resolutionw:{alias:"rsw"},resolutionh:{alias:"rsh"},viewportw:{alias:"vpw"},viewporth:{alias:"vph"},ppi:{},touch:{cache:!0,calc:function(){return i.features.touchevents()}},label:{need:{properties:["system.label_prefix"]},calc:function(e,t){var r={};return t.set&&n.util.isObject(t.set)&&(r=n.util.prefixObject(t.set,e.properties.system.label_prefix)),r}}},properties:{lib:{active:!1,generator:"img",useparameter:function(e){return Object.keys(e.parameter)}},system:{label_prefix:"n_",section_prefix:"brain"}}};t.brainTrackingSystem=a},function(e,t,r){"use strict";t.__esModule=!0;var n={touchevents:function(){var e=!1;return("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(e=!0),e}};t.features=n},function(e,t,r){"use strict";t.__esModule=!0;var n={key:"pakpie",parameter:{attributeset:{fixed:1}},properties:{lib:{active:!0,generator:"img_pakpie"},system:{}}};t.pakpieTrackingSystem=n},function(e,t,r){"use strict";t.__esModule=!0;var n={key:"tif",parameter:{pageidentifier:{need:{parameter:["section"]},calc:function(e){return e.parameter.section.replace(/\./g,"/")}},brand:{},region:{need:{parameter:["brand"]},calc:function(e){var t;switch(e.parameter.brand){case"gmxch":t="ch";break;case"gmxat":t="at";break;default:t="de"}return t}}},properties:{lib:{active:!1,generator:"obj",generatorAdapter:function(e,t){return{obj:e.system.tif_container,methodName:"track",data:t}},useparameter:function(e){return Object.keys(e.parameter)}},system:{tif_container:{}}}};t.tifTrackingSystem=n},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(1),a=r(3),o=function(e){return n.util.createUrl(e)},u=function(e){var t=new Image(1,1);return new a.Promise(function(r,n){t.addEventListener("load",function(){r("load")}),t.addEventListener("error",function(){n("error")}),t.addEventListener("abort",function(){n("abort")}),t.src=e,i.logger.log("img","request",e)})},s={key:"img",run:function(e){var t=o(e);return u(t)},getValue:function(e){return o(e)},track:function(e){return u(e)}};t.imageGenerator=s},function(e,t){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}function cleanUpNextTick(){u&&a&&(u=!1,a.length?o=a.concat(o):s=-1,o.length&&drainQueue())}function drainQueue(){if(!u){var e=runTimeout(cleanUpNextTick);u=!0;for(var t=o.length;t;){for(a=o,o=[];++s<t;)a&&a[s].run();s=-1,t=o.length}a=null,u=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var r,n,i=e.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var a,o=[],u=!1,s=-1;i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new Item(e,t)),1!==o.length||u||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(1),a=r(3),o=function(e){var t,r,i,a=0;for(t=n.util.createUrl(e),i=t.split("?"),i[1]+="&signature=",r=0;r<i[1].length;r++)a+=i[1].charCodeAt(r);return a=a%5843+9127,i[1]+=a,t=i.join("?")},u=function(e){var t,r=new Image(1,1);return t=new a.Promise(function(t,n){r.addEventListener?(r.addEventListener("load",function(){i.logger.log("img_pakpie","loaded",e),t("load")}),r.addEventListener("error",function(){i.logger.log("img_pakpie","error",e),n("error")}),r.addEventListener("abort",function(){i.logger.log("img_pakpie","abort",e),n("abort")}),r.src=e,i.logger.log("img_pakpie","request",e)):(r.src=e,i.logger.log("img_pakpie","request",e),t("unknown"))}),t["catch"](function(){}),t},s={key:"img_pakpie",getValue:function(e){return o(e)},track:function(e){return u(e)},run:function(e){var t=o(e);return u(t)}};t.imagePakpieGenerator=s},function(e,t,r){"use strict";t.__esModule=!0;var n=r(0),i=r(1),a=r(3),o={key:"obj",run:function(e){return new a.Promise(function(t){n.util.isObject(e)&&n.util.isObject(e.obj)&&e.methodName&&e.obj.hasOwnProperty(e.methodName)&&n.util.isFunction(e.obj[e.methodName])&&(e.obj[e.methodName](e.data),i.logger.log("obj","request",e)),t(!0)})}};t.objectGenerator=o},function(e,t,r){"use strict";t.__esModule=!0,r(39),r(61)},function(e,t,r){r(40),e.exports=r(2).Object.assign},function(e,t,r){var n=r(9);n(n.S+n.F,"Object",{assign:r(50)})},function(e,t,r){var n=r(42),i=r(43),a=r(45),o=Object.defineProperty;t.f=r(7)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(u){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(6);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){e.exports=!r(7)&&!r(5)(function(){return 7!=Object.defineProperty(r(44)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(6),i=r(4).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(6);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(4),i=r(10),a=r(11),o=r(12)("src"),u=Function.toString,s=(""+u).split("toString");r(2).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,r,u){var c="function"==typeof r;c&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(c&&(a(r,o)||i(r,o,e[t]?""+e[t]:s.join(String(t)))),e===n?e[t]=r:u?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||u.call(this)})},function(e,t,r){var n=r(49);e.exports=function(e,t,r){if(n(e),t===undefined)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){"use strict";var n=r(13),i=r(59),a=r(60),o=r(18),u=r(15),s=Object.assign;e.exports=!s||r(5)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=s({},e)[r]||Object.keys(s({},t)).join("")!=n})?function(e,t){for(var r=o(e),s=arguments.length,c=1,f=i.f,l=a.f;s>c;)for(var p,h=u(arguments[c++]),y=f?n(h).concat(f(h)):n(h),g=y.length,d=0;g>d;)l.call(h,p=y[d++])&&(r[p]=h[p]);return r}:s},function(e,t,r){var n=r(11),i=r(14),a=r(53)(!1),o=r(56)("IE_PROTO");e.exports=function(e,t){var r,u=i(e),s=0,c=[];for(r in u)r!=o&&n(u,r)&&c.push(r);for(;t.length>s;)n(u,r=t[s++])&&(~a(c,r)||c.push(r));return c}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(14),i=r(54),a=r(55);e.exports=function(e){return function(t,r,o){var u,s=n(t),c=i(s.length),f=a(o,c);if(e&&r!=r){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((e||f in s)&&s[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(17),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(17),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(57)("keys"),i=r(12);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(4),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){r(62),e.exports=r(2).Object.keys},function(e,t,r){var n=r(18),i=r(13);r(63)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(9),i=r(2),a=r(5);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(19);e.exports=n.TrackLib},,,,function(e,t,r){r(38),e.exports=r(64)}])});
//# sourceMappingURL=tracklib.poly.min.map